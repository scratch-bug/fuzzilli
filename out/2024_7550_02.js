const wasm_code = new Uint8Array([
    0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x05, 0x01, 0x5f,
    0x00, 0x00, 0x03, 0x02, 0x01, 0x00, 0x07, 0x0e, 0x01, 0x0a, 0x67, 0x65,
    0x74, 0x5f, 0x73, 0x74, 0x72, 0x75, 0x63, 0x74, 0x00, 0x00, 0x0a, 0x07,
    0x01, 0x05, 0x00, 0xfb, 0x07, 0x00, 0x0b
]);
const wasm_module = new WebAssembly.Module(wasm_code);
const instance = new WebAssembly.Instance(wasm_module);
const wasm_struct_proto = instance.exports.get_struct();

function hot_function(obj) {
    return obj.p;
}

const normal_obj = {};
Object.setPrototypeOf(normal_obj, { p: 1 });

for (let i = 0; i < 10000; i++) {
    hot_function(normal_obj);
}

const trigger_obj = {};
Object.setPrototypeOf(trigger_obj, wasm_struct_proto);

try {
    hot_function(trigger_obj);
} catch (e) {}